<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Zumo-Maze-solver: C:/Zumo/Zumo-Maze-solver/zumo_ledArray.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Zumo-Maze-solver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('zumo__led_array_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Modules</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">zumo_ledArray.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Library for Freescale KL46Z and Pololu Zumo Reflectance Sensor Array.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;MKL46Z4.h&quot;</code><br />
<code>#include &quot;<a class="el" href="zumo__led_array_8h_source.html">zumo_ledArray.h</a>&quot;</code><br />
</div>
<p><a href="zumo__led_array_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a59b28f0bbe153f9c2172066b437b4431"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59b28f0bbe153f9c2172066b437b4431"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a59b28f0bbe153f9c2172066b437b4431">la_init</a> (void)</td></tr>
<tr class="memdesc:a59b28f0bbe153f9c2172066b437b4431"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function prepares LED array pins and LPTMR to work. <br /></td></tr>
<tr class="separator:a59b28f0bbe153f9c2172066b437b4431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32c7d6b84769f952cd6c7759209482ef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32c7d6b84769f952cd6c7759209482ef"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a32c7d6b84769f952cd6c7759209482ef">la_startCal</a> (void)</td></tr>
<tr class="memdesc:a32c7d6b84769f952cd6c7759209482ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function sets calibration flag. <br /></td></tr>
<tr class="separator:a32c7d6b84769f952cd6c7759209482ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80842c42e85101e1d714a753aba9952a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80842c42e85101e1d714a753aba9952a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a80842c42e85101e1d714a753aba9952a">la_stopCal</a> (void)</td></tr>
<tr class="memdesc:a80842c42e85101e1d714a753aba9952a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function clears calibration flag. <br /></td></tr>
<tr class="separator:a80842c42e85101e1d714a753aba9952a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a337d6814f1a3b2d1d6b365d75c34e3ef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a337d6814f1a3b2d1d6b365d75c34e3ef"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a337d6814f1a3b2d1d6b365d75c34e3ef">la_pins_init</a> (void)</td></tr>
<tr class="memdesc:a337d6814f1a3b2d1d6b365d75c34e3ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function prepares LED array pins (multiplexers, pull-up/pull-down resistors, NVIC) <br /></td></tr>
<tr class="separator:a337d6814f1a3b2d1d6b365d75c34e3ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73600f9119563ff029a79b4a9d4d077f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73600f9119563ff029a79b4a9d4d077f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a73600f9119563ff029a79b4a9d4d077f">la_pins_as_inputs</a> (void)</td></tr>
<tr class="memdesc:a73600f9119563ff029a79b4a9d4d077f"><td class="mdescLeft">&#160;</td><td class="mdescRight">As the name suggests, function sets pins as inputs and enables interrupts. <br /></td></tr>
<tr class="separator:a73600f9119563ff029a79b4a9d4d077f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c0f431d82c25c370d7fad51661b211"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9c0f431d82c25c370d7fad51661b211"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#ac9c0f431d82c25c370d7fad51661b211">la_pins_as_outputs_and_high</a> (void)</td></tr>
<tr class="memdesc:ac9c0f431d82c25c370d7fad51661b211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function sets pins as outputs and disables interrupts. <br /></td></tr>
<tr class="separator:ac9c0f431d82c25c370d7fad51661b211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7caaad9cec5c5d2faaadc1fee71db81f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a7caaad9cec5c5d2faaadc1fee71db81f">lptimer_reload</a> (uint16_t time)</td></tr>
<tr class="memdesc:a7caaad9cec5c5d2faaadc1fee71db81f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resets LPTMR and set time value.  <a href="#a7caaad9cec5c5d2faaadc1fee71db81f">More...</a><br /></td></tr>
<tr class="separator:a7caaad9cec5c5d2faaadc1fee71db81f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6564668e00e247cccee27f78d4ee5741"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a6564668e00e247cccee27f78d4ee5741">la_getLptmrCNR</a> (void)</td></tr>
<tr class="memdesc:a6564668e00e247cccee27f78d4ee5741"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads CNR register.  <a href="#a6564668e00e247cccee27f78d4ee5741">More...</a><br /></td></tr>
<tr class="separator:a6564668e00e247cccee27f78d4ee5741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaecbd2d7dc60340959cb832b0a936b15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#aaecbd2d7dc60340959cb832b0a936b15">la_calibrateMinMax</a> (volatile <a class="el" href="structla__sensor__t.html">la_sensor_t</a> *sensor_array)</td></tr>
<tr class="memdesc:aaecbd2d7dc60340959cb832b0a936b15"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function decides which colour is under each sensor (1 means dark/black)  <a href="#aaecbd2d7dc60340959cb832b0a936b15">More...</a><br /></td></tr>
<tr class="separator:aaecbd2d7dc60340959cb832b0a936b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b4e20e64ea6bb3d6632fe07585dbcd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a7b4e20e64ea6bb3d6632fe07585dbcd6">la_getPercentageReflectance</a> (int16_t *output_array)</td></tr>
<tr class="memdesc:a7b4e20e64ea6bb3d6632fe07585dbcd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates relative 'surface reflectivity'.  <a href="#a7b4e20e64ea6bb3d6632fe07585dbcd6">More...</a><br /></td></tr>
<tr class="separator:a7b4e20e64ea6bb3d6632fe07585dbcd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14acac7e08664c3b6255ac7391eb09d4"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a14acac7e08664c3b6255ac7391eb09d4">la_calculateSensorState</a> (volatile <a class="el" href="structla__sensor__t.html">la_sensor_t</a> *sensor_array)</td></tr>
<tr class="memdesc:a14acac7e08664c3b6255ac7391eb09d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function decides which colour is under each sensor (1 means dark/black)  <a href="#a14acac7e08664c3b6255ac7391eb09d4">More...</a><br /></td></tr>
<tr class="separator:a14acac7e08664c3b6255ac7391eb09d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc6bc56488668d7ffba60574c1374144"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#abc6bc56488668d7ffba60574c1374144">la_getSensorState</a> (void)</td></tr>
<tr class="memdesc:abc6bc56488668d7ffba60574c1374144"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns status of each sensor.  <a href="#abc6bc56488668d7ffba60574c1374144">More...</a><br /></td></tr>
<tr class="separator:abc6bc56488668d7ffba60574c1374144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa2da1558b73250cfb07ab3dedfcf1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fa2da1558b73250cfb07ab3dedfcf1f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a1fa2da1558b73250cfb07ab3dedfcf1f">LPTimer_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a1fa2da1558b73250cfb07ab3dedfcf1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function changes sensor pins direction. It works after charging sensor capacitors. <br /></td></tr>
<tr class="separator:a1fa2da1558b73250cfb07ab3dedfcf1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae01b365de69142666b470757d24fae84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#ae01b365de69142666b470757d24fae84">PORTA_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:ae01b365de69142666b470757d24fae84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Voltage drop function for two sensors.  <a href="#ae01b365de69142666b470757d24fae84">More...</a><br /></td></tr>
<tr class="separator:ae01b365de69142666b470757d24fae84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e8c9a419cbde7a01f2d5664f59dce9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a29e8c9a419cbde7a01f2d5664f59dce9">PORTC_PORTD_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a29e8c9a419cbde7a01f2d5664f59dce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Voltage drop function for four sensors.  <a href="#a29e8c9a419cbde7a01f2d5664f59dce9">More...</a><br /></td></tr>
<tr class="separator:a29e8c9a419cbde7a01f2d5664f59dce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aac67b44fd8522f1794cc20210b6e30b9"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="structla__sensor__t.html">la_sensor_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#aac67b44fd8522f1794cc20210b6e30b9">ledArr</a> [6]</td></tr>
<tr class="separator:aac67b44fd8522f1794cc20210b6e30b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a3e53e87d294ef560c6ab98805c51b"><td class="memItemLeft" align="right" valign="top">volatile char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a67a3e53e87d294ef560c6ab98805c51b">la_state</a></td></tr>
<tr class="separator:a67a3e53e87d294ef560c6ab98805c51b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace4be061e8699df0061b24a48ccbbe3c"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#ace4be061e8699df0061b24a48ccbbe3c">measured</a> = 0</td></tr>
<tr class="separator:ace4be061e8699df0061b24a48ccbbe3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59dceca9de5c44458070062ca7a68c95"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#a59dceca9de5c44458070062ca7a68c95">cal_flag</a> = 0</td></tr>
<tr class="separator:a59dceca9de5c44458070062ca7a68c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac65cc9d437fc4e52a79dc15761c46f40"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zumo__led_array_8c.html#ac65cc9d437fc4e52a79dc15761c46f40">valid_data</a> = 0</td></tr>
<tr class="separator:ac65cc9d437fc4e52a79dc15761c46f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Library for Freescale KL46Z and Pololu Zumo Reflectance Sensor Array. </p>

<p>Definition in file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a14acac7e08664c3b6255ac7391eb09d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char la_calculateSensorState </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="structla__sensor__t.html">la_sensor_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function decides which colour is under each sensor (1 means dark/black) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_array</td><td>Pointer to buffer structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return value is byte with binary coded sensor state (last 6 bits, '1' means dark). </dd></dl>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00139">139</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaecbd2d7dc60340959cb832b0a936b15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void la_calibrateMinMax </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="structla__sensor__t.html">la_sensor_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function decides which colour is under each sensor (1 means dark/black) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_array</td><td>Pointer to buffer structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return value is byte with binary coded sensor state (last 6 bits, '1' means dark). </dd></dl>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00122">122</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6564668e00e247cccee27f78d4ee5741"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t la_getLptmrCNR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function reads CNR register. </p>
<p>We had to create this function because each reading of this register has to be preceded by writing something to it. </p><dl class="section return"><dt>Returns</dt><dd>Return value is number from LPTMR CNR </dd></dl>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00114">114</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7b4e20e64ea6bb3d6632fe07585dbcd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void la_getPercentageReflectance </td>
          <td>(</td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>output_array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates relative 'surface reflectivity'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_array</td><td>Pointer to destination array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Output array has to have six elements. </dd></dl>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00131">131</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="abc6bc56488668d7ffba60574c1374144"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char la_getSensorState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns status of each sensor. </p>
<dl class="section return"><dt>Returns</dt><dd>Return value is byte with binary coded sensor state (last 6 bits, '1' means dark). </dd></dl>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00156">156</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7caaad9cec5c5d2faaadc1fee71db81f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lptimer_reload </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resets LPTMR and set time value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>This value will be writtenn to LPTMR_CMR_COMPARE register </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00107">107</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae01b365de69142666b470757d24fae84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PORTA_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Voltage drop function for two sensors. </p>
<p>This functions works simply. It decides which sensor has triggered the interrupt. Reads it's time and saves it in array. When voltage on each sensor has dropped it reloads timer and sensor counter and calculates state of sensors. </p>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00179">179</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="a29e8c9a419cbde7a01f2d5664f59dce9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PORTC_PORTD_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Voltage drop function for four sensors. </p>
<p>It works like <a class="el" href="zumo__led_array_8c.html#ae01b365de69142666b470757d24fae84" title="Voltage drop function for two sensors. ">PORTA_IRQHandler</a> </p>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00214">214</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a59dceca9de5c44458070062ca7a68c95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t cal_flag = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calibration flag which allow LED array to perfotm self-calibration </p>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00013">13</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="a67a3e53e87d294ef560c6ab98805c51b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile char la_state</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encoded status of each sensor (six last bits) </p>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00011">11</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="aac67b44fd8522f1794cc20210b6e30b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="structla__sensor__t.html">la_sensor_t</a> ledArr[6]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Six sensors array </p>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00010">10</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="ace4be061e8699df0061b24a48ccbbe3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t measured = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Counter how many sensors has been readed </p>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00012">12</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac65cc9d437fc4e52a79dc15761c46f40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t valid_data = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Semaphore </p>

<p>Definition at line <a class="el" href="zumo__led_array_8c_source.html#l00014">14</a> of file <a class="el" href="zumo__led_array_8c_source.html">zumo_ledArray.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_187cade3614a7d6717ec20c39413a03b.html">Zumo</a></li><li class="navelem"><a class="el" href="dir_57a8ae3804c95259bf318aa93fd70fae.html">Zumo-Maze-solver</a></li><li class="navelem"><a class="el" href="zumo__led_array_8c.html">zumo_ledArray.c</a></li>
    <li class="footer">Generated on Fri Feb 27 2015 18:30:36 for Zumo-Maze-solver by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
